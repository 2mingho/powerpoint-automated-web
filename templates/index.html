{% extends 'base.html' %}
{% block title %}Inicio | Data Intel{% endblock %}

{% block content %}
<div class="preview-flex">
  <!-- Formulario principal -->
  <div class="report-container">
    <h1 class="page-title">Reportes Data Intel</h1>

    <form action="/" method="POST" enctype="multipart/form-data" onsubmit="mostrarCargando()">
      <!-- √Årea para subir el archivo -->
      <div class="upload-box">
        <div class="upload-icon">üìÅ</div>
        <div>
          <strong>Subir archivo</strong>
          <p>Selecciona o arrastra un archivo para generar un reporte de an√°lisis de datos.</p>
        </div>
        <input type="file" name="csv_file" id="csv_file" accept=".csv" required />
      </div>

      <!-- T√≠tulo del reporte -->
      <div class="form-group">
        <label for="report_title">Nombre del reporte</label>
        <input type="text" id="report_title" name="report_title" placeholder="Ingresa un nombre para tu reporte" />
      </div>

      <!-- Descripci√≥n del reporte -->
      <div class="form-group">
        <label for="description">Descripci√≥n</label>
        <textarea id="description" name="description" placeholder="Describe brevemente el contenido del reporte"></textarea>
      </div>

      <!-- Wordcloud opcional -->
      <div class="form-group">
        <label for="wordcloud_file">Wordcloud (opcional)</label>
        <input type="file" id="wordcloud_file" name="wordcloud_file" accept="image/png" />
      </div>

      <!-- Solo fecha -->
      <div class="form-group checkbox">
        <input type="checkbox" id="solo_fecha" name="solo_fecha" />
        <label for="solo_fecha">Solo fecha</label>
      </div>

      <button type="submit">Generar reporte</button>

      <p id="mensaje-cargando" style="display: none; font-weight: bold; margin-top: 15px;">
        Procesando reporte... Esto puede tardar unos segundos.
      </p>
    </form>
  </div>

  <!-- Contenedor de vista previa -->
  <div class="preview-container" id="preview-container" style="display: none;">
    <div class="preview-header">
      <label for="numRows">Vista previa del archivo</label>
      <select id="numRows">
        <option value="5">5 filas</option>
        <option value="10" selected>10 filas</option>
        <option value="25">25 filas</option>
        <option value="50">50 filas</option>
      </select>
    </div>

    <table class="preview-table" id="preview-table">
      <thead>
        <tr>
          <th>#</th>
          <th></th>
          <th>Hit Sentence</th>
          <th>Sentiment</th>
        </tr>
      </thead>
      <tbody>
        <!-- Filas se llenan din√°micamente con JS -->
      </tbody>
    </table>
  </div>
</div>

<script>
  function mostrarCargando() {
    document.getElementById('mensaje-cargando').style.display = 'block';
  }
</script>
{% endblock %}
